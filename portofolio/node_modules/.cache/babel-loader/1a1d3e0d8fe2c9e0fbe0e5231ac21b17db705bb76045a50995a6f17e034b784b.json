{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/ZiQi/Desktop/\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939/portofolio/portofolio/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import React,{useState,useEffect}from'react';import styled,{keyframes}from'styled-components';import SmallBubble from'./SmallBubble';import{getRandomInt,generateNonOverlappingPosition,fetchPositionsFromFile}from'./utils';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const pulse=keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  0% {\\n    transform: scale(1);\\n    box-shadow: 0 0 5px rgba(218, 255, 251, 0.5);\\n  }\\n  50% {\\n    transform: scale(1.05);\\n    box-shadow: 0 0 20px rgba(218, 255, 251, 1);\\n  }\\n  100% {\\n    transform: scale(1);\\n    box-shadow: 0 0 5px rgba(218, 255, 251, 0.5);\\n  }\\n\"])));const Bubble=styled.div.attrs(props=>({style:{width:\"\".concat(props.size,\"px\"),height:\"\".concat(props.size,\"px\"),top:\"\".concat(props.position.y,\"px\"),left:\"\".concat(props.position.x,\"px\"),backgroundImage:\"url(\".concat(props.image,\")\")}}))(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  background-size: cover;\\n  background-position: center;\\n  border-radius: 50%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  position: absolute;\\n  transition: transform 0.3s, opacity 0.3s;\\n  animation: \",\" 2s infinite;\\n\\n  &:hover {\\n    transform: scale(1.1);\\n  }\\n\"])),pulse);const SmallBubblesContainer=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  width: \",\"px;\\n  height: \",\"px;\\n  top: \",\"px;\\n  left: \",\"px;\\n  transform: translate(-50%, -50%);\\n  display: flex;\\n  flex-wrap: wrap;\\n  justify-content: center;\\n  align-items: center;\\n\"])),props=>props.size*1.2,props=>props.size*1.2,props=>props.position.y+props.size/2,props=>props.position.x+props.size/2);const HighlightArea=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  border: 2px dashed rgba(255, 255, 255, 0.5);\\n  border-radius: 50%;\\n  top: 0;\\n  left: 0;\\n  pointer-events: none;\\n\"])));const LargeBubble=_ref=>{let{skill,subSkills,image,size,position,existingPositions}=_ref;const[expanded,setExpanded]=useState(false);const[smallBubblePositions,setSmallBubblePositions]=useState([]);useEffect(()=>{const loadPositions=async()=>{if(expanded){const containerSize={width:size*1.2,height:size*1.2};const newPositions=[];const newSizes=[];let success=true;subSkills.forEach(skillName=>{const newSize=getRandomInt(skillName.length*2+60,skillName.length*3+60);const{position:newPosition,overlap}=generateNonOverlappingPosition(newSize,newPositions.concat(existingPositions),containerSize,position);if(overlap){success=false;}newPositions.push(newPosition);newSizes.push(newSize);});if(success){let finalPos=newPositions.map((pos,index)=>({...pos,size:newSizes[index]}));setSmallBubblePositions(finalPos);//savePositionsToLocalStorage(finalPos);\n}else{try{let storedPositions=await fetchPositionsFromFile(\"smallPos_\".concat(skill,\".json\"));console.log('Fetched positions:',storedPositions);setSmallBubblePositions(storedPositions);//setSmallBubblePositions(fetchPositionsFromLocalStorage());\n}catch(error){console.error('Failed to fetch positions:',error);}}}};loadPositions();},[expanded,subSkills,size,existingPositions,position,skill]);/*\r\n  const savePositionsToLocalStorage = (positions) => {\r\n    const jsonString = JSON.stringify(positions);\r\n    localStorage.setItem(`smallPos_${skill}`, jsonString);\r\n  };\r\n*/const handleClick=()=>{setExpanded(true);};/*\r\n  const downloadPositionsAsFile = () => {\r\n    const positions = localStorage.getItem(`smallPos_${skill}`);\r\n    const blob = new Blob([positions], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `smallPos_${skill}.json`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n  */return/*#__PURE__*/_jsxs(_Fragment,{children:[!expanded&&/*#__PURE__*/_jsx(Bubble,{onClick:handleClick,size:size,position:position,image:image,children:skill}),expanded&&/*#__PURE__*/_jsxs(SmallBubblesContainer,{size:size,position:position,children:[/*#__PURE__*/_jsx(HighlightArea,{}),smallBubblePositions.length>0&&subSkills.map((subSkill,index)=>/*#__PURE__*/_jsx(SmallBubble,{skill:subSkill,position:smallBubblePositions[index]},index))]})]});};export default LargeBubble;","map":{"version":3,"names":["React","useState","useEffect","styled","keyframes","SmallBubble","getRandomInt","generateNonOverlappingPosition","fetchPositionsFromFile","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","pulse","_templateObject","_taggedTemplateLiteral","Bubble","div","attrs","props","style","width","concat","size","height","top","position","y","left","x","backgroundImage","image","_templateObject2","SmallBubblesContainer","_templateObject3","HighlightArea","_templateObject4","LargeBubble","_ref","skill","subSkills","existingPositions","expanded","setExpanded","smallBubblePositions","setSmallBubblePositions","loadPositions","containerSize","newPositions","newSizes","success","forEach","skillName","newSize","length","newPosition","overlap","push","finalPos","map","pos","index","storedPositions","console","log","error","handleClick","children","onClick","subSkill"],"sources":["C:/Users/ZiQi/Desktop/新建文件夹/portofolio/portofolio/src/Components/Skills/LargeBubble.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled, { keyframes } from 'styled-components';\r\nimport SmallBubble from './SmallBubble';\r\nimport { getRandomInt, generateNonOverlappingPosition, fetchPositionsFromFile } from './utils';\r\n\r\nconst pulse = keyframes`\r\n  0% {\r\n    transform: scale(1);\r\n    box-shadow: 0 0 5px rgba(218, 255, 251, 0.5);\r\n  }\r\n  50% {\r\n    transform: scale(1.05);\r\n    box-shadow: 0 0 20px rgba(218, 255, 251, 1);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n    box-shadow: 0 0 5px rgba(218, 255, 251, 0.5);\r\n  }\r\n`;\r\n\r\nconst Bubble = styled.div.attrs(props => ({\r\n  style: {\r\n    width: `${props.size}px`,\r\n    height: `${props.size}px`,\r\n    top: `${props.position.y}px`,\r\n    left: `${props.position.x}px`,\r\n    backgroundImage: `url(${props.image})`,\r\n  }\r\n}))`\r\n  background-size: cover;\r\n  background-position: center;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  position: absolute;\r\n  transition: transform 0.3s, opacity 0.3s;\r\n  animation: ${pulse} 2s infinite;\r\n\r\n  &:hover {\r\n    transform: scale(1.1);\r\n  }\r\n`;\r\n\r\nconst SmallBubblesContainer = styled.div`\r\n  position: absolute;\r\n  width: ${props => props.size * 1.2}px;\r\n  height: ${props => props.size * 1.2}px;\r\n  top: ${props => props.position.y + props.size / 2}px;\r\n  left: ${props => props.position.x + props.size / 2}px;\r\n  transform: translate(-50%, -50%);\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst HighlightArea = styled.div`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 2px dashed rgba(255, 255, 255, 0.5);\r\n  border-radius: 50%;\r\n  top: 0;\r\n  left: 0;\r\n  pointer-events: none;\r\n`;\r\n\r\nconst LargeBubble = ({ skill, subSkills, image, size, position, existingPositions }) => {\r\n  const [expanded, setExpanded] = useState(false);\r\n  const [smallBubblePositions, setSmallBubblePositions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const loadPositions = async () => {\r\n\r\n      if (expanded) {\r\n          const containerSize = { width: size * 1.2, height: size * 1.2 };\r\n          const newPositions = [];\r\n          const newSizes = [];\r\n          let success = true;\r\n\r\n          subSkills.forEach((skillName) => {\r\n            const newSize = getRandomInt(skillName.length * 2 + 60, skillName.length * 3 + 60);\r\n            const { position:newPosition, overlap } = generateNonOverlappingPosition(newSize, newPositions.concat(existingPositions), containerSize, position);\r\n            if (overlap) {\r\n              success = false;\r\n            }\r\n            newPositions.push(newPosition);\r\n            newSizes.push(newSize);\r\n          });\r\n\r\n          if (success) {\r\n            let finalPos = newPositions.map((pos, index) => ({ ...pos, size: newSizes[index] }));\r\n            setSmallBubblePositions(finalPos);\r\n            //savePositionsToLocalStorage(finalPos);\r\n          } else {\r\n            try {\r\n              let storedPositions = await fetchPositionsFromFile(`smallPos_${skill}.json`);\r\n              console.log('Fetched positions:', storedPositions);\r\n              setSmallBubblePositions(storedPositions);\r\n              //setSmallBubblePositions(fetchPositionsFromLocalStorage());\r\n            } catch (error) {\r\n              console.error('Failed to fetch positions:', error);\r\n            }\r\n          }\r\n        }\r\n      \r\n    };\r\n\r\n    loadPositions();\r\n  }, [expanded, subSkills, size, existingPositions, position, skill]);\r\n/*\r\n  const savePositionsToLocalStorage = (positions) => {\r\n    const jsonString = JSON.stringify(positions);\r\n    localStorage.setItem(`smallPos_${skill}`, jsonString);\r\n  };\r\n*/\r\n  const handleClick = () => {\r\n    setExpanded(true);\r\n  };\r\n  /*\r\n  const downloadPositionsAsFile = () => {\r\n    const positions = localStorage.getItem(`smallPos_${skill}`);\r\n    const blob = new Blob([positions], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `smallPos_${skill}.json`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n  */\r\n\r\n  return (\r\n    <>\r\n      {!expanded && (\r\n        <Bubble onClick={handleClick} size={size} position={position} image={image}>\r\n          {skill}\r\n        </Bubble>\r\n      )}\r\n      {expanded && (\r\n        <SmallBubblesContainer size={size} position={position}>\r\n          <HighlightArea />\r\n          {smallBubblePositions.length > 0 && subSkills.map((subSkill, index) => (\r\n            <SmallBubble key={index} skill={subSkill} position={smallBubblePositions[index]} />\r\n          ))}\r\n        </SmallBubblesContainer>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LargeBubble;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}